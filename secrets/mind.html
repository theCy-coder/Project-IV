<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mind</title>

    <link rel="stylesheet" href="../css/main.css" />

</head>
<body>
    <div class="mind-container">
        <div id="nodes">
            <div class="image clickable" id="node1"></div>
            <div class="image clickable" id="node2"></div>
        </div>

    </div>      
    
    

    <div class="modal n1">
        <div class="modal-content">
            <img src="../res/img1-circula.png">
            <img src="../res/img2-circula.png">
            <img src="../res/img3-circula.png">
            <img src="../res/img4-circula.png">

            <div class="description">
                <p>I always think about this moment whenever I feel down. This is one of our early days. The smile of yours always keep me motivated through my days and this will be forever stuck in my mind. You are my type. You're a bright light</p>
            </div>
            <span class="back-btn" id="back1">&uarr;</span>
        </div>
        
    </div>
    <div class="modal n2">
        <div class="modal-content">
            <img src="../res/img5-circula.png">

            <div class="description">
                <p>You plant a seed, it grows some roots, a branch and leaves. Becomes a tree of life until our nights are filled with peace from stress and strife and that's the blessin' that I get from loving you.</p>
                <p>'Cause you entrusted me with the key to your heart, and you smart 'cause even though I need a new start Due to my past transgressions you believed in me I guess the light I see in you is what you see in me.</p>
            </div>
            <span class="back-btn" id="back2">&uarr;</span>
        </div>
    <script defer>
        let firstClick = 0, secondClick = 0;
        let modals = document.querySelectorAll('.modal');
        let node1 = document.getElementById("node1");
        let node2 = document.getElementById("node2");

        let back1 = document.getElementById("back1");
        node1.addEventListener('click', ()=>{
            modals[0].style.top = "50%";
        })
        back1.onclick = () => {
            modals[0].style.top = "-50%";
            firstClick += 1;
            verify();
        }
        let back2 = document.getElementById("back2");
        node2.addEventListener('click', ()=>{
            modals[1].style.top = "50%";
            
        })
        back2.onclick = () => {
            modals[1].style.top = "-50%";
            secondClick += 1;
            verify();
        }


        let display = document.querySelector(".mind-container");
    
        function verify(){
            if(firstClick === 1 && secondClick === 1){

                // transition to next page
                display.remove();
                let readyText = document.createElement('p');
                readyText.innerText = "GET READY FOR THE NEXT GAME"

                let container = document.createElement("div");
                container.id = "ready-container";
                container.appendChild(readyText);
                
            
                let loader = document.createElement("span");
                loader.id = "loader";
                container.appendChild(loader);
                
                document.querySelector('body').appendChild(container);

                let loaderAnimate = setInterval(() => {
                    let loaderWidth = loader.offsetWidth;
                    loaderWidth -= loaderWidth < 20? loaderWidth : 20  
                    loader.style.width = `${loaderWidth}px`;
                    console.log(loaderWidth)
                    if(loaderWidth === 0){
                        clearInterval(loaderAnimate);
                        setTimeout(()=>{
                            window.location = './sneak.html';
                        },1000)
                    }
                }, 800);
            }
        }
    </script>
    <script defer type="module" src="./scripts/auth.js"></script>
    <script type="module" defer>
        import {getAccess} from './scripts/auth.js';       
        getAccess();
    </script>
</body>
</html>